# JOURNAL 2026-02-11 - Audit look-ahead + Tests NHHM v2

---

## DECOUVERTES DU JOUR

### 1. Audit look-ahead
- K3/K5: HMM fit sur 14 ans d'un coup = **LOOK-AHEAD BIAISE**
- COMBINED v1: CYCLE (regle fixe) + ML (walk-forward) = **CLEAN**
- Fourier features: trailing window = **CLEAN**

### 2. COMBINED v1 confirme comme seul resultat honnete
- Sharpe 0.91, Equity 1.72x, MDD 5.8%
- Mais 1 seule seed, pas encore confirme multi-seed

### 3. NHHM v2 implemente et teste (resultats decevants)

---

## RESULTATS NHHM v2

### PHASE A: NHHM v2 avec hmmlearn - FAIT

```
ETAPE A1: regime_nhhm_v2.py ecrit
  - hmmlearn.GaussianHMM + rolling 10k
  - Features: return_1, momentum_6/12, vol_ratio, rsi_centered, dist_ma20
  - Fichier: src/regime_nhhm_v2.py
  - STATUS: [X] FAIT

ETAPE A2: Validation bear markets - FAIT
  - Script: scripts/experimental/test_nhhm_v2_validation.py

  RESULTATS 2 ETATS:
    COVID Mars 2020     attendu BEAR  detecte BEAR  [OK]   P(bull)=0.43
    Top 64k Mai 2021    attendu BEAR  detecte BULL  [FAIL] P(bull)=0.67
    FTX Nov 2022        attendu BEAR  detecte BEAR  [OK]   P(bull)=0.16
    Recovery Jan 2023   attendu BULL  detecte BEAR  [FAIL] P(bull)=0.21
    Post-Halving 2024   attendu BULL  detecte BULL  [OK]   P(bull)=0.54
    â†’ Score: 3/5 (60%), Sharpe global: -0.86, Hit rate: 49.1%

  RESULTATS 3 ETATS (bull/bear/neutre):
    COVID Mars 2020     attendu BEAR  detecte BEAR  [OK]   P(bull)=0.28
    Top 64k Mai 2021    attendu BEAR  detecte BULL  [FAIL] P(bull)=0.54
    FTX Nov 2022        attendu BEAR  detecte BEAR  [OK]   P(bull)=0.31
    Recovery Jan 2023   attendu BULL  detecte BEAR  [FAIL] P(bull)=0.27
    Post-Halving 2024   attendu BULL  detecte BEAR  [FAIL] P(bull)=0.28
    â†’ Score: 2/5 (40%), Sharpe global: -2.05, Hit rate: 48.2%
    â†’ PIRE que 2 etats, elimine

  CONCLUSION NHHM v2:
    - Le HMM capture la VOLATILITE, pas la DIRECTION
    - Bull hit rate 54.5% (decent), Bear hit rate 46.5% (pire que random)
    - Biais bear: 68% des predictions sont "bear"
    - MEDIOCRE comme filtre, POSSIBLE comme feature ML

ETAPE A3: Labels generes
  - outputs/nhhm_v2_validation.csv (59415 lignes)
  - data/COMBINED_v2_labels.csv (NHHM+ML fusion)
  - Distribution COMBINED v2: 55694 CASH, 3619 LONG, 102 SHORT
  - STATUS: [X] FAIT
```

---

## SMOKE TESTS - RESULTATS COMPLETS

### Lances le 2026-02-11 ~17:12, termines ~18:26

```
TEST 1: COMBINED v1 seed 102 (smoke, 5 trials)
  Commande: py -3 scripts/production/run_scheduler_wfa_phase.py
    --labels-csv data/COMBINED_labels.csv
    --trials 5 --seed 102
    --out-dir outputs/wfa_combined_v1_smoke_102 --use-fused
  STATUS: TERMINE
  RESULTATS:
    Equity:  1.104x
    MDD:     17.05%
    Sharpe:  -0.48
    Trades:  598
  VERDICT: DECEVANT - bien pire que seed originale (0.91 Sharpe, 1.72x, 5.8% MDD)
  NOTE: seed 102 != seed originale, sensibilite a la seed confirmee

TEST 2: COMBINED v2 seed 201 (smoke, 5 trials)
  Commande: py -3 scripts/production/run_scheduler_wfa_phase.py
    --labels-csv data/COMBINED_v2_labels.csv
    --trials 5 --seed 201
    --out-dir outputs/wfa_combined_v2_smoke_201 --use-fused
  STATUS: TERMINE
  RESULTATS:
    Equity:  1.439x
    MDD:     2.52%
    Sharpe:  1.69
    Trades:  371
  VERDICT: EXCELLENT - meilleur que v1 sur tous les criteres!
  NOTE: NHHM mediocre seul mais booste le pipeline en combinaison

TEST 3: NHHM 3 etats (validation rapide)
  STATUS: TERMINE
  RESULTATS: Score 2/5, Sharpe -2.05
  VERDICT: ELIMINE - pire que 2 etats
```

### Tableau comparatif smoke tests

| Metrique | v1 original | v1 seed 102 | **v2 seed 201** |
|----------|-------------|-------------|-----------------|
| Sharpe | 0.91 | -0.48 | **1.69** |
| Equity | 1.72x | 1.10x | **1.44x** |
| MDD | 5.8% | 17.05% | **2.52%** |
| Trades | ? | 598 | 371 |
| Clean? | OUI | OUI | OUI |

### Analyse

1. **v1 tres sensible a la seed**: seed originale = 0.91, seed 102 = -0.48
   â†’ Confirme le besoin de multi-seed pour valider
2. **v2 surprenamment bon**: NHHM mediocre seul (-0.86) mais en combinaison
   avec ML, il filtre mieux que CYCLE
3. **v2 MDD 2.52%** = excellent, le NHHM garde le systeme en CASH plus souvent
   (93.7% CASH) ce qui reduit l'exposition et donc le drawdown
4. **ATTENTION**: 5 trials seulement, besoin de multi-seed pour confirmer

---

## PLAN MIS A JOUR (post smoke tests)

### Changement de priorite!

```
AVANT:  Priorite 1 = multi-seed COMBINED v1
APRES:  Priorite 1 = multi-seed COMBINED v2 (ET v1 en parallele)

Raison: v2 smoke Sharpe 1.69 >> v1 smoke Sharpe -0.48
  Le NHHM ajoute de la valeur en combinaison malgre ses resultats mediocres seul
```

### Prochaines etapes

```
PRIORITE 1: Multi-seed COMBINED v2 (5 seeds, 30 trials)
  Seeds: 201, 202, 203, 204, 205
  Critere: 4/5 seeds avec Sharpe > 0.5
  Duree: ~4-5 jours sequentiel

PRIORITE 1bis: Multi-seed COMBINED v1 (5 seeds, 30 trials) EN PARALLELE
  Seeds: 101, 102, 103, 104, 105
  Critere: 4/5 seeds avec Sharpe > 0.5
  â†’ Comparer v1 vs v2 sur 5 seeds chacun

PRIORITE 2: Analyser POURQUOI v2 marche mieux
  - Est-ce que le NHHM filtre les mauvaises periodes?
  - Est-ce simplement que CASH 93.7% = moins d'exposition = moins de pertes?
  - Est-ce que le NHHM detecte quelque chose d'utile malgre son hit rate faible?
```

---

## RESULTATS MULTI-SEED 30 TRIALS (premieres seeds)

### Termines le 2026-02-12

```
COMBINED v2 seed 201 (30 trials):
  Equity:  1.321x
  MDD:     10.59%
  Sharpe:  2.38
  Trades:  364
  VERDICT: Sharpe EXCELLENT (2.38), mais MDD monte a 10.59% (vs 2.52% en smoke 5t)
  NOTE: Plus de trials = parametres mieux optimises mais aussi plus de variance

COMBINED v1 seed 101 (30 trials):
  Equity:  1.719x
  MDD:     5.82%
  Sharpe:  0.91
  Trades:  579
  VERDICT: CONFIRME la seed originale! (0.91, 1.72x, 5.8%)
  NOTE: Le smoke seed 102 (-0.48) etait un outlier, seed 101 = stable
```

### Tableau comparatif complet (toutes seeds terminees)

| Run | Equity | MDD | Sharpe | Trades | Verdict |
|-----|--------|-----|--------|--------|---------|
| v1 s101 (30t) | **1.719x** | **5.82%** | **0.91** | 579 | OK |
| v1 s102 (30t) | **1.835x** | **9.76%** | -0.65 | 516 | Equity OK, Sharpe negatif |
| v2 s201 (30t) | 1.321x | 10.59% | 2.38 | 364 | Sharpe haut mais equity faible |
| v2 s202 (30t) | **0.829x** | **27.8%** | **-3.39** | 365 | PERD DE L'ARGENT |

### Analyse 2 seeds (2026-02-12 soir)

1. **v1 (CYCLE+ML) = STABLE en equity**
   - Seed 101: 1.719x, MDD 5.82%, Sharpe 0.91
   - Seed 102: 1.835x, MDD 9.76%, Sharpe -0.65
   - Les DEUX seeds gagnent de l'argent (1.72x et 1.84x!)
   - Le Sharpe moyen par fold est negatif sur s102 (certains folds perdent gros)
   - Mais l'equity globale monte quand meme = les bons folds compensent largement
   - MDD reste < 10% sur les 2 seeds

2. **v2 (NHHM+ML) = INSTABLE**
   - Seed 201: 1.321x, Sharpe 2.38 (genial)
   - Seed 202: 0.829x, Sharpe -3.39 (PERD de l'argent!)
   - Variation enorme entre seeds = le NHHM est trop sensible au hasard
   - Le Sharpe 2.38 de s201 etait probablement un coup de chance

3. **Conclusion provisoire (2/5 seeds):**
   - v1 CYCLE+ML = FAVORI (equity positive sur 2/2 seeds)
   - v2 NHHM+ML = FRAGILE (1 win, 1 loss)
   - Seeds restantes (103-105, 203-205) en cours avec --jobs 4

4. **Note sur le NHHM:**
   - Le NHHM seul est mediocre (Sharpe -0.86, hit rate bear 46.5%)
   - En combinaison il amplifie la variance: quand il filtre bien = excellent,
     quand il filtre mal = catastrophe
   - Le CYCLE (regle fixe) est plus robuste car il ne depend PAS du hasard
   - MAIS: le NHHM est utilise massivement en finance quantitative
   - Hypotheses: nos features sont peut-etre sous-optimales, ou la config
     (window 10k, refit 500) n'est pas la bonne pour BTC
   - A investiguer apres les multi-seeds: features, window size, threshold

---

## RESULTATS BATCH 1 (2026-02-13) - seeds 203, 204, 103

| Seed | Approche | Equity | MDD | Sharpe | Trades | Verdict |
|------|----------|--------|-----|--------|--------|---------|
| v2 s203 | NHHM+ML | 1.259x | 15.07% | 0.56 | 388 | OK |
| **v2 s204** | NHHM+ML | **0.695x** | **37.87%** | 0.29 | 371 | **PERD $** |
| v1 s103 | CYCLE+ML | 1.489x | 20.65% | -1.30 | 489 | OK |

**v2 confirme INSTABLE: 2/4 seeds perdent de l'argent â†’ ELIMINE**

---

## RESULTATS BATCH 2 (2026-02-13) - seeds 104, 105

| Seed | Approche | Equity | MDD | Sharpe | Trades | Verdict |
|------|----------|--------|-----|--------|--------|---------|
| **v1 s104** | CYCLE+ML | **0.751x** | **38.54%** | -1.93 | 437 | **PERD $** |
| v1 s105 | CYCLE+ML | 1.598x | 8.95% | -0.02 | 371 | OK |

---

## BILAN FINAL MULTI-SEED v1 (CYCLE + ML)

```
Seed 101: 1.719x  MDD  5.82%  Sharpe  0.91  â† meilleur
Seed 102: 1.835x  MDD  9.76%  Sharpe -0.65
Seed 103: 1.489x  MDD 20.65%  Sharpe -1.30
Seed 104: 0.751x  MDD 38.54%  Sharpe -1.93  â† SEUL ECHEC
Seed 105: 1.598x  MDD  8.95%  Sharpe -0.02
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Moyenne:  1.478x  MDD ~16.7%
Survie:   4/5 = 80% (seuil: >66% bon, >80% excellent)
```

**Verdict: VALIDE avec reserve.**
- 80% survie = au seuil "excellent"
- Equity moyenne 1.48x sur 14 ans = rentable
- MAIS variance elevee (0.75x a 1.84x) = sensible a la seed Optuna
- Le s104 perd gros (MDD 38.5%) â†’ la strategie peut mal tourner

**Prochaines options:**
1. Lancer 5 seeds SUPPLEMENTAIRES (106-110) pour confirmer le taux de survie
2. Analyser POURQUOI s104 echoue (quels folds, quels params)
3. Passer au live/paper trading avec les params des meilleures seeds (101, 105)
4. Tester le confidence sizing sur les seeds gagnantes

---

## ANALYSE D'EFFICACITE (2026-02-12)

Le systeme est en CASH 90-94% du temps. Mais quand il trade, c'est efficace :

```
EFFICACITE PAR TEMPS ACTIF:
  v1 (CYCLE+ML): +48%/an actif, +0.12%/trade, actif 10.7% du temps (1.5 ans/14)
  v2 (NHHM+ML):  +36%/an actif, +0.09%/trade, actif 6.3% du temps (0.9 ans/14)
  ML seul:        +9%/an actif, actif 18.4% du temps (2.6 ans/14)

Le filtre (CYCLE ou NHHM) multiplie le rendement/temps actif:
  ML seul:  9%/an actif
  + CYCLE: 48%/an actif (x5.3)
  + NHHM:  36%/an actif (x4.0)
```

Distribution des labels (pourquoi si peu de trades):
```
                     CASH      LONG     SHORT
ML seul:            81.6%     17.5%      0.9%    <-- deja tres conservateur
COMBINED v1:        89.3%     10.5%      0.2%    <-- CYCLE coupe 41.6% en plus
COMBINED v2:        93.7%      6.1%      0.2%    <-- NHHM coupe 68.0% en plus
```

Conclusion: le systeme est un "sniper" - il attend les bonnes conditions
et ne tire que quand tout est aligne. Le filtre evite les mauvaises periodes
plutot qu'il ne detecte les bonnes. C'est sa valeur ajoutee.

---

## CE QUI EST FAIT vs A FAIRE

| Quoi | Status | Date |
|------|--------|------|
| COMBINED v1 (CYCLE+ML) | FAIT (1 seed) | 2026-02-10 |
| Audit look-ahead | FAIT (K3/K5 biaises) | 2026-02-11 |
| Arbre decision mis a jour | FAIT (honnete) | 2026-02-11 |
| NHHM v2 code (hmmlearn) | FAIT | 2026-02-11 |
| NHHM v2 validation 2 etats | FAIT (3/5, mediocre) | 2026-02-11 |
| NHHM v2 validation 3 etats | FAIT (2/5, elimine) | 2026-02-11 |
| Labels COMBINED v2 generes | FAIT | 2026-02-11 |
| Smoke COMBINED v1 seed 102 | FAIT (Sharpe -0.48, decevant) | 2026-02-11 |
| Smoke COMBINED v2 seed 201 | FAIT (Sharpe 1.69, excellent!) | 2026-02-11 |
| **v2 seed 201 (30t)** | **FAIT (Sharpe 2.38, MDD 10.59%)** | **2026-02-12** |
| **v1 seed 101 (30t)** | **FAIT (Sharpe 0.91, MDD 5.82%)** | **2026-02-12** |
| Multi-seed v2 (seeds 201-204) | **FAIT - ELIMINE (2/4 perdent $)** | 2026-02-13 |
| Multi-seed v1 (seeds 101-105) | **FAIT - 4/5 equity+ (80% survie)** | 2026-02-13 |
| **Confidence sizing P(bull)** | **FAIT (module + integration)** | **2026-02-12** |
| Multi-seed v1 (seeds 104-105) | **FAIT - s104 PERD, s105 OK** | 2026-02-13 |

---

## FICHIERS CREES AUJOURD'HUI

| Fichier | Description |
|---------|-------------|
| `src/regime_nhhm_v2.py` | NHHM v2: hmmlearn + rolling 10k |
| `scripts/experimental/test_nhhm_v2_validation.py` | Validation bear markets |
| `outputs/nhhm_v2_validation.csv` | Predictions NHHM completes |
| `data/COMBINED_v2_labels.csv` | Fusion NHHM + ML |
| `docs/guides/ARBRE_DECISION_ALPHA.md` | Arbre decision mis a jour |
| `src/confidence_sizing.py` | Position sizing base sur P(bull) |
| `data/COMBINED_v2_labels_confidence.csv` | Labels v2 + P(bull) colonne |

---

## COMMANDES POUR VERIFIER LES SMOKE TESTS

```powershell
# Verifier si les smoke tests sont finis
Get-ChildItem outputs/wfa_combined_v1_smoke_102/*.json
Get-ChildItem outputs/wfa_combined_v2_smoke_201/*.json

# Lire les resultats
py -3 -c "
import json, glob
for p in glob.glob('outputs/wfa_combined_*/WFA_*.json'):
    d = json.load(open(p))
    o = d.get('overall', {})
    print(f'{p}:')
    print(f'  Sharpe={o.get(\"sharpe\",\"?\")}, Equity={o.get(\"equity_final\",\"?\")}, MDD={o.get(\"max_dd\",\"?\")}')
"

# Si smoke OK â†’ lancer multi-seed COMBINED v1
foreach ($seed in 102..106) {
  py -3 scripts/production/run_scheduler_wfa_phase.py `
    --labels-csv data/COMBINED_labels.csv `
    --trials 30 --seed $seed `
    --out-dir outputs/wfa_combined_seed_$seed --use-fused
}
```

---

## OPTIMISATION VITESSE WFA (2026-02-12)

**Probleme**: 1 seed = ~6h avec `--jobs 1` (1260 backtests sequentiels sur 1 coeur/12)

**Diagnostic**:
```
Par fold: GLOBAL (30t) + state "0" (30t) + state "1" (30t) = 90 trials
14 folds x 90 trials = 1260 backtests par seed
Tout sur 1 coeur = gaspillage de 11 coeurs
```

**Solution retenue**: `--jobs 4` + 3 seeds en parallele
- 3 seeds x 4 jobs = 12 coeurs utilises (100%)
- Gain: ~3x par seed (6h -> ~2h)
- 6 seeds restantes en 2 vagues de 3 = ~4h total au lieu de ~18h
- 30 trials gardes (zero compromis sur la qualite)
- TPE sampler perd en efficacite au-dela de ~4-6 jobs paralleles

**Commandes accelerees (pour seeds restantes)**:
```powershell
# Batch 1: 3 seeds en parallele, jobs=4
Start-Process py -ArgumentList "-3 scripts/production/run_scheduler_wfa_phase.py --labels-csv data/COMBINED_v2_labels.csv --trials 30 --seed 203 --jobs 4 --out-dir outputs/wfa_combined_v2_seed_203 --use-fused"
Start-Process py -ArgumentList "-3 scripts/production/run_scheduler_wfa_phase.py --labels-csv data/COMBINED_v2_labels.csv --trials 30 --seed 204 --jobs 4 --out-dir outputs/wfa_combined_v2_seed_204 --use-fused"
Start-Process py -ArgumentList "-3 scripts/production/run_scheduler_wfa_phase.py --labels-csv data/COMBINED_labels.csv --trials 30 --seed 103 --jobs 4 --out-dir outputs/wfa_combined_v1_seed_103 --use-fused"

# Batch 2: quand batch 1 fini
# seeds 205, 104, 105
```

---

## FIX TECHNIQUE

- `scripts/production/run_scheduler_wfa_phase.py` ligne 34:
  ROOT change de `parents[1]` a `parents[2]` car le script a ete deplace
  de `scripts/` vers `scripts/production/` lors de la reorganisation.

---

## NOTES IMPORTANTES

1. **NE PAS TOUCHER** aux fichiers existants qui marchent:
   - `src/ml_directional.py` (clean, walk-forward)
   - `data/COMBINED_labels.csv` (v1, resultat clean)

2. **Le NHHM v2 est clean** (pas de look-ahead):
   - Rolling window: fit sur 10k points PASSES uniquement
   - Prediction: sur les points SUIVANTS
   - Mais MEDIOCRE en performance (Sharpe -0.86)

3. **Les smoke tests durent ~3h** (5 trials au lieu de 30):
   - Suffisant pour verifier que le pipeline ne crash pas
   - Pas suffisant pour des metriques fiables

4. **Prochaine priorite = multi-seed v1 ET v2 en parallele**:
   - v2 smoke est prometteur mais 1 seed ne suffit pas
   - Lancer 5 seeds chacun (30 trials) pour comparer
   - ~4-5 jours sequentiel par approche

---

## COMMANDES POUR LANCER LES MULTI-SEED

```powershell
# Multi-seed COMBINED v2 (priorite)
foreach ($seed in 201..205) {
  py -3 scripts/production/run_scheduler_wfa_phase.py `
    --labels-csv data/COMBINED_v2_labels.csv `
    --trials 30 --seed $seed `
    --out-dir outputs/wfa_combined_v2_seed_$seed --use-fused
}

# Multi-seed COMBINED v1 (en parallele si possible)
foreach ($seed in 101..105) {
  py -3 scripts/production/run_scheduler_wfa_phase.py `
    --labels-csv data/COMBINED_labels.csv `
    --trials 30 --seed $seed `
    --out-dir outputs/wfa_combined_v1_seed_$seed --use-fused
}

# Verifier resultats
py -3 -c "
import json, glob
for p in sorted(glob.glob('outputs/wfa_combined_*/WFA_*.json')):
    d = json.load(open(p))
    o = d.get('overall', {})
    print(f'{p}:')
    print(f'  Sharpe={o.get(\"sharpe\",\"?\")}, Equity={o.get(\"equity_final\",\"?\")}, MDD={o.get(\"max_dd\",\"?\")}')
"
```

---

## CONFIDENCE-BASED POSITION SIZING (2026-02-12 soir)

**Spec**: 1% base + jusqu'a 1% boost selon P(bull) du NHHM. Levier 10x FIXE.

**Formule**:
```
P(bull) = 0.50 (seuil) -> 1.00% du capital par trade
P(bull) = 0.60         -> 1.20%
P(bull) = 0.75         -> 1.50%
P(bull) = 0.90         -> 1.80%
P(bull) = 1.00 (max)   -> 2.00%
P(bull) < 0.50         -> 1.00% (base, pas de boost)
SHORT: inverse (P(bull) bas = confiance haute en short)
```

**Fichiers crees/modifies**:
- `src/confidence_sizing.py` (NOUVEAU) - Module de sizing
- `ichimoku_pipeline_web_v4_8_fixed.py` - Param `confidence_series` ajoute a `backtest_long_short`
- `scripts/production/run_scheduler_wfa_phase.py` - Flags `--confidence-sizing` et `--confidence-csv`
- `data/COMBINED_v2_labels_confidence.csv` - Labels v2 enrichis avec P(bull)

**Smoke test**:
```
BTC 2020, params Ichimoku par defaut (9/26/52):
  Sans confidence: equity 1.065x, 62 trades
  Avec confidence: equity 1.154x, 62 trades (meme signaux, taille differente)
  Gain: +8.9% d'equity grace au sizing adaptatif
```

**Important**:
- Le confidence ne change PAS les signaux (meme nb de trades)
- Il change COMBIEN on investit par trade
- Applique UNIQUEMENT en phase de test (pas pendant l'optimisation Optuna)
- Retro-compatible: sans `--confidence-sizing`, comportement identique

**Usage**:
```powershell
# Avec confidence sizing
py -3 scripts/production/run_scheduler_wfa_phase.py `
  --labels-csv data/COMBINED_v2_labels_confidence.csv `
  --confidence-sizing `
  --trials 30 --seed 201 --jobs 4 `
  --out-dir outputs/wfa_combined_v2_confidence_201 --use-fused

# Ou avec CSV separe
py -3 scripts/production/run_scheduler_wfa_phase.py `
  --labels-csv data/COMBINED_v2_labels.csv `
  --confidence-sizing --confidence-csv outputs/nhhm_v2_validation.csv `
  --trials 30 --seed 201 --jobs 4 `
  --out-dir outputs/wfa_combined_v2_confidence_201 --use-fused
```

---

## IDEE: CYCLE v2 BASE SUR BLOCS (a valider apres multi-seed)

**Concept**: Remplacer les offsets jour fixes (540j bull, 540-1095j bear) par des pourcentages du cycle de 210k blocs.

**Analyse ATH par cycle:**

| Cycle | ATH | Rendement | Position cycle (jours) | Position cycle (%) |
|-------|-----|-----------|----------------------|-------------------|
| 1 (2012) | $1,163 (Nov 2013) | x94 | ~365j | 25% |
| 2 (2016) | $19,783 (Dec 2017) | x30 | ~529j | 36% |
| 3 (2020) | $68,789 (Nov 2021) | x7.9 | ~549j | 38% |
| 4 (2024) | $109,114 (Jan 2025) | x1.7 (en cours) | ~280j | 19% (provisoire) |

**Observations:**
- ATH tombe a ~33% du cycle (25-38%, moyenne cycles 2-3)
- Rendement decline de ~3-4x par cycle (x94 -> x30 -> x7.9 -> x1.7)
- Actuellement a ~46% du cycle 4 (passe la zone ATH historique)

**Verdict**: Idee intellectuellement interessante mais:
- Seulement 3 cycles complets = echantillon trop petit
- Delta bloc/jour negligeable depuis 2020 (minage regulier)
- A revisiter UNIQUEMENT si v1 CYCLE survit multi-seed

---

Cree: 2026-02-11
Maj: 2026-02-13 - MULTI-SEED COMPLETE. v1 4/5 equity+ (80%), v2 ELIMINE.

APPROCHES (FINAL 2026-02-13)
      â”‚
      â”œâ”€ðŸ”´ HMM K3         Sharpe 0.99  â†’ BIAISE (look-ahead)
      â”œâ”€ðŸ”´ HMM K5         12 seeds     â†’ BIAISE (meme probleme)
      â”œâ”€ðŸ”´ NHHM v1        statsmodels  â†’ CRASH (abandonne)
      â”œâ”€ðŸ”´ NHHM v2        3/5 tests    â†’ MEDIOCRE (Sharpe -0.86)
      â”œâ”€ðŸ”´ NHHM 3 etats   2/5 tests    â†’ ELIMINE (Sharpe -2.05)
      â”œâ”€ðŸ”´ ML seul        Sharpe 0.12  â†’ FAIBLE (clean mais insuffisant)
      â”œâ”€ðŸ”´ CYCLE seul     Sharpe 0.99  â†’ OK (clean)
      â”œâ”€ðŸŸ¡ COMBINED v1    4/5 equity+  â†’ VALIDE â˜… (survie 80%, moy 1.48x)
      â”œâ”€ðŸ”´ COMBINED v2    2/4 perdent  â†’ ELIMINE (survie 50%)
      â”œâ”€âšª NHHM feature    pas teste    â†’ optionnel
      â””â”€âšª HMM K3 rolling  pas teste    â†’ basse priorite