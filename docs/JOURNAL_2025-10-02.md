## Journal — 2025-10-02

### Actions
- Reconstruit les JSONL de trials pour K2/K3/K5/K8 à partir des sorties WFA.
- Ajouté dashboards Plotly (heatmap/3D) multi-K et ALL; tentative d’auto-refresh (PowerShell puis watcher Python).
- Corrigé `run_scheduler_wfa.py` et `run_scheduler_wfa_phase.py` pour le logging par-trial et PROGRESS.json.
- Vérifié la configuration fused H2 (USE_FUSED_H2=1) et la disponibilité du CSV `data/BTC_FUSED_2h_clean.csv`.
- Généré et sauvegardé les rapports de progrès et de métriques.
- Ajout d’un watcher baseline (`scripts/watch_baseline_results.py`) qui agrège en live les runs fixes BTC et publie `docs/LIVE_BASELINES.csv`, `$live/LIVE_BASELINES.json`, `$live/LIVE_REPORT.html`.
- Lancement de 4 backtests BTC “paramètres fixes” (A,B,C,D) depuis `scripts/run_btc_baseline_fixed.py` avec USE_FUSED_H2=1.
- Corrections Fourier: `spectral_flatness` (retourne 0 si zéros présents; suppression du biais +1e-12), tests unitaires ajoutés, doc mise à jour.
- Corrections HMM: suppression du +1e-12 sur PSD dans `build_hmm_regimes.py` (probas propres), robustification.
- Correction import dynamique watcher live (`scripts/plotsafe_imports.py`) pour résoudre `ModuleNotFoundError: scripts`.

### Progrès (phase, 08:32 UTC)
- Global: 31.2%
- K2: 3/13 seeds, Avg% 23.1
- K3: 3/13 seeds, Avg% 26.7
- K5: 3/7 seeds, Avg% 42.9
- K8: 3/7 seeds, Avg% 42.9
Fichiers:
- `outputs/reports/progress_20251002_083254.csv`
- `outputs/reports/metrics_20251002_083254.csv`

### Problèmes
- Auto-refresh des dashboards instable sous PowerShell (profil/hooks). Solution de contournement: relancer manuellement les scripts Python; watcher Python ajouté mais non confirmé.
- Data H2 fusion: nécessité de s’assurer que `data/BTC_FUSED_2h_clean.csv` est présent et que `$env:USE_FUSED_H2='1'` est positionné avant les runs.
- Watcher live K3/K8: import `scripts.*` cassé corrigé (`plotsafe_imports.py`), relancer le watcher pour valider.

### Conclusions
- K3 reste prioritaire: meilleurs Eqx sous MDD contenu; poursuivre sur plusieurs seeds (≥8) et agréger médian Calmar/Sharpe.
- K5: alternative défensive (MDD faible) mais Eqx inférieur; garder en parallèle pour robustesse.
- K2/K8: faible intérêt actuel; à mettre en pause pour économiser CPU/IO.

### Suivi/Prochaines étapes
- Lancer 8–16 seeds K3 phase (300 trials, ATR sweep local) avec USE_FUSED_H2=1.
- Stabiliser l’auto-refresh via watcher Python; vérifier croissance de `trials_from_wfa.jsonl` en live.
- Exporter un tableau médian/IQR par K et par phase pour décider du paramétrage retenu.
- Étendre les backtests fixes aux paires ETH/DOGE avec presets B/C (levier=3, pos=1%) pour viser ≥1%/mois médian.
- Ajouter des tests d’entropie (Fourier) et de part low/high power sans epsilon.


